
struct Point {
    x: int;
    y: int;
}

test "auto_deref" {
    let p = Point { x: 10, y: 20 };
    let ptr = &p;
    
    // This uses the dot operator on a pointer
    // In standard C, this requires ->. In Zen-C w/ Auto-Deref, . should work.
    assert(ptr.x == 10, "read ptr.x failed");
    
    ptr.y = 30;
    assert(p.y == 30, "write ptr.y failed");
    
    assert(ptr.y == 30, "read ptr.y after write failed");

    let i = Inner { val: 42 };
    let o = Outer { inner: i };
    let p_out = &o;
    
    // Nested access: p.inner.val -> p->inner.val
    assert(p_out.inner.val == 42, "Nested access failed");
}

struct Inner {
    val: int;
}

struct Outer {
    inner: Inner;
}
